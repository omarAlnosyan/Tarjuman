graph TB
    subgraph "User Interface Layer"
        UI[Next.js Frontend<br/>Port 3000<br/>tarjuman-ui/]
        UI --> |HTTP POST| API
    end
    
    subgraph "API Gateway Layer"
        API[FastAPI Backend<br/>Port 8000<br/>api/main.py]
        API --> |Validate| GUARD[Guardrails Check]
        GUARD --> |Valid| SEARCH
        GUARD --> |Invalid| ERROR[400 Error]
    end
    
    subgraph "Search Engine Layer"
        SEARCH[Hybrid Search Engine]
        SEARCH --> EXACT[Exact Match<br/>SparseRetriever]
        SEARCH --> BM25[BM25 Search<br/>Keyword-based<br/>Weight: 70%]
        SEARCH --> FAISS[FAISS Search<br/>Semantic<br/>Weight: 30%]
        EXACT --> MERGE[Merge & Rank<br/>RRF Algorithm]
        BM25 --> MERGE
        FAISS --> MERGE
        MERGE --> RESULT[SearchResult]
    end
    
    subgraph "LLM Layer"
        RESULT --> LLM[LLM Enhancement<br/>Llama 3.3 70B<br/>Groq API]
        LLM --> |Enhanced| RESPONSE[API Response]
        RESULT --> |Fallback| RESPONSE
    end
    
    subgraph "Data Layer"
        JSON[(all_chunks_final.json<br/>687 verses<br/>JSON Format)]
        VDB[(ChromaDB<br/>Vector Database<br/>FAISS Index)]
        DOCX[(Raw DOCX File<br/>Source Data)]
        
        EXACT --> JSON
        BM25 --> JSON
        FAISS --> VDB
        DOCX --> |Process| JSON
        JSON --> |Build| VDB
    end
    
    RESPONSE --> |JSON| UI
    
    style UI fill:#e1f5ff
    style API fill:#fff4e1
    style SEARCH fill:#f3e5f5
    style LLM fill:#e8f5e9
    style JSON fill:#ffebee
    style VDB fill:#ffebee
    style DOCX fill:#ffebee
